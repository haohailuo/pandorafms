<?xml version="1.0" encoding="utf-8"?> 

<chapter id="chapter4">
  <title>Incident management and messages</title>
  
  <para>
    The system monitoring process needs to follow up the incidents 
    arising in the system besides receiving and processing the data to be 
    monitored in each time interval
  </para>
  
  <para>
    Pandora uses a tool called Incident Manager for this task, where 
    each user can open an incident, where a description of what happened 
    in the network is shown. This can be completed with comments and files
    when necessary.
  </para>
  
  <para>
    This system is designed for group work. Different roles and
    workflow systems permit to move incidents from one group to another. 
    The system allows different groups and different users to work on
    the same incident, sharing information and files.
  </para>
  
  <para>
    Clicking on "Manage Incidents", in the Operation menu, a list 
    showing all the incidents is displayed, ordered by the date-time they
    were updated. Filters can be applied to display only those
    incidents the user is interested on.
  </para>
  
  <graphic scale='70' fileref="images/image034.png" valign="bottom" 
	   align="center"/>

  <para>
    The filters that can be applied are:
  </para>
  
  <itemizedlist>
    <listitem>
      <para><emphasis>Incident status filter</emphasis>.
      The user can display:</para>
      <para>- All incidents</para>
      <para>- Active incidents</para>
      <para>- Closed incidents</para>
      <para>- Rejected incidents</para>
      <para>- Expired incidents</para>
    </listitem>
    <listitem>
      <para>
	<emphasis>Property filter</emphasis>.
	The incidents are shown by:
      </para>
      <para>- All priorities</para>
      <para>- Informative priority</para>
      <para>- Low priority</para>
      <para>- Medium priority</para>
      <para>- High priority</para>
      <para>- Very high priority</para>
      <para>- Maintenance</para>
    </listitem>
    <listitem>
      <para><emphasis>Group filter</emphasis>. 
      It can be selected to display just the 
      incidents of a given Pandora group.
      </para>
    </listitem>
  </itemizedlist>
  
  <para>
    The incident list is displayed showing information in the following columns:
  </para>
  
  <para>
    <emphasis>ID:</emphasis> ID of the incident.
  </para>
  <para>
    <emphasis>Status:</emphasis> The incident status is represented by
    the following icons:
  </para>
  
  <para><inlinegraphic fileref="images/dot_red.png"/> Active incident</para>
  <para><inlinegraphic fileref="images/dot_yellow.png"/> Active incident 
  with comments</para>
  <para><inlinegraphic fileref="images/dot_blue.png"/> Rejected incident</para>
  <para><inlinegraphic fileref="images/dot_green.png"/> Closed incident</para>
  <para><inlinegraphic fileref="images/dot_white.png"/> Expired incident</para>
  
  <para><emphasis>Incident name:</emphasis> Name given to the incident</para>
  <para>
    <emphasis>Priority:</emphasis> The incident assigned priority is
    represented by the following icons:
  </para>
  
  <para><inlinegraphic fileref="images/dot_red.png"/>
  <inlinegraphic fileref="images/dot_red.png"/>
  <inlinegraphic fileref="images/dot_red.png"/> 
  Very high priority</para>
  <para><inlinegraphic fileref="images/dot_yellow.png"/>
  <inlinegraphic fileref="images/dot_red.png"/>
  <inlinegraphic fileref="images/dot_red.png"/> 
  High priority</para>
  <para><inlinegraphic fileref="images/dot_yellow.png"/>
  <inlinegraphic fileref="images/dot_yellow.png"/>
  <inlinegraphic fileref="images/dot_red.png"/> 
  Medium priority</para>
  <para><inlinegraphic fileref="images/dot_green.png"/>
  <inlinegraphic fileref="images/dot_yellow.png"/>
  <inlinegraphic fileref="images/dot_yellow.png"/> 
  Low priority</para>
  <para><inlinegraphic fileref="images/dot_green.png"/>
  <inlinegraphic fileref="images/dot_green.png"/>
  <inlinegraphic fileref="images/dot_yellow.png"/> 
  Informative priority</para>
  <para><inlinegraphic fileref="images/dot_green.png"/>
  <inlinegraphic fileref="images/dot_green.png"/>
  <inlinegraphic fileref="images/dot_green.png"/>
  Maintenance priority</para>
  
  <para>
    <emphasis>Group:</emphasis> The name of the group the incident has
    been assigned to. One incident can only belong to a single group.
  </para>
  <para>
    <emphasis>Updated at:</emphasis> This is the date/time the
    incident was updated for the last time.
  </para>
  <para>
    <emphasis>Source:</emphasis> The source of the incident. The
    source is selected from a list stored in the data base. This list
    can only be modified by the database base administrator.
  </para>
  <para>
    <emphasis>Owner:</emphasis> User to whom the incident has been
    assigned to.  It doesn't coinced with the creator of the incident,
    as the incident may have been moved from one user to another. The
    incident can be assigned to another user by its owner, or by a
    user with management privileges over the group the incidents
    belong to.
  </para>
  <sect1 id="sec4.1">
    <title>Adding an incident</title>
    <para>
      The creation of incidents is performed by clicking on 
      "Manage Incidents" &gt; "New incident", in the Operation menu
    </para>
    
    <graphic fileref="images/image035.png" valign="bottom" align="center"/>
    
    <para>
      The "Create Incident" form will come up, containing the necessary
      fields to define the incident. The process is completed by clicking 
      on the "Create" button.
    </para>
  </sect1>
  <sect1 id="sec4.2">
    <title>Incident follow up</title>
    
    <para>
      All the open incidents can be followed up. The tool is reached by 
      clicking on the "Manage Incidents" option, in the Operation menu.
    </para>
    
    <para>
      The indicent is selected by clicking on its name in the 
      "Incident name" column.
    </para>
    
    <para>
      The screen coming up shows us the configuration variables of 
      the incident, its comments and attached files.
    </para>
    
    <para>
      The first part of the screen contains the Incident configuration
    </para>
    
    <graphic fileref="images/image036.png" valign="bottom" align="center"/>
    
    <para>From this form the following values can be updated:</para>
    <itemizedlist>
      <listitem>
	<para><emphasis>Incident name</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incident owner</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incident status</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incident source</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Group the indicent will belong to</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Indicent priority</emphasis></para>
      </listitem>
    </itemizedlist>
    <para>
      The indicent is updated by clicking on the "Update incident" button.
    </para>
    <sect2 id="sec4.2.1">
      <title>Adding comments to an incident</title>
      <para> Comments about the incident can added clicking on "Add note".
      This will open up a screen with a text box in it.
      </para>
      <graphic fileref="images/image037.png" valign="bottom" align="center"/>
      <para>The comment is written in this box.
      The Comment will appear in the "Notes attached to incident"
      section after the button "Add" is pressed.
      </para>
      <graphic fileref="images/image038.png" valign="bottom" align="center"/>
      <para>Only users with writting privilieges can add a comment,
      and only the owners of the incident or of the notes can delete them.
      </para>
    </sect2>
    <sect2 id="sec4.2.2">
      <title>Attaching files to an incident</title>
      <para>Sometimes it is necessary to link an incident with an image,
      a configuration file, or any kind of file.
      </para>
      <para>
	The files are attached in the "Attach file" section.
	Here the file can be searched for in the local machine and
	attached when the "Upload" button is pressed.
      </para>
      <para>
	Only a user with writing privileges can attach a file,
	and only the owner of the incident or of the file can delete it.
      </para>
      <graphic fileref="images/image039.png" valign="bottom" align="center" scale="70"/>
      <para>The incident follow up screen shows all the files attached 
      to the incident in the "Attached files" section of the screen.</para>
      <graphic fileref="images/image040.png" valign="bottom" align="center" scale="60"/>
    </sect2>
  </sect1>
  <sect1 id="sec4.3">
    <title>Searching for an incident</title>
    <para>
      A specific incident can be found among the incidents created
      in Pandora by either using a filter, as explained in the first
      section of this chapter, or by making a query using the "Manage
      Incidents" &gt; "Searh Incident" tool, in the Operation menu.
    </para>
    <graphic fileref="images/image041.png" valign="bottom" align="center"/>
    <para>
      Any text string included as a sub-string in the incident can be
      searched for using this tool. This search engine looks for the
      string in the Incident title as well as in the text contained by
      the incident. The search engine will not search either the
      Comments added to the agent or the attached files. The search
      can be performed in addition to group, priority or status
      filters.
    </para>
  </sect1>
  <sect1 id="sec4.4">
    <title>Statistics</title>
    <para>
      The incident statisticts are shown in the "Manage
      Incidents" &gt; "Statistics" option of the Operation menu. They
      can be of five different types:
    </para>
    <itemizedlist>
      <listitem>
	<para><emphasis>Incident status</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incident priority</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Users with the incident opened</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incidents by group</emphasis></para>
      </listitem>
      <listitem>
	<para><emphasis>Incident source</emphasis></para>
      </listitem>
    </itemizedlist>
    <graphic fileref="images/image042.png" valign="bottom" align="center"/>
    <graphic fileref="images/image043.png" valign="bottom" align="center"/>
    <graphic fileref="images/image044.png" valign="bottom" align="center"/>
  </sect1>
  <sect1 id="sec4.5">
	<title>Messages</title>
	<para>
	 In Pandora 1.2 it is possible to send messages to others user. 
	 Each user can see his/her messages in "Messages" in the Operation
	 menu.
	</para>
	
	<graphic scale='80' fileref="images/messages.png" valign="bottom" 
		 align="center"/>

	<para>
	To send a message to other user you must click in "Messages" &gt; 
	"New mesage" in the Operation menu.
	</para>
	
	<graphic scale='80' fileref="images/messages1.png" valign="bottom" 
		 align="center"/>
	<para>
	It is possible to send a message to a group from "Messages to groups"
	&gt; "New mesage" in the Operation menu. 
	</para>
	<graphic scale='80' fileref="images/messages2.png" valign="bottom" 
		 align="center"/>
   </sect1>
</chapter>
