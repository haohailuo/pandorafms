<?xml version="1.0" encoding="utf-8"?> 

<chapter id="chapter3">

  <title>Agents</title>

  <para>
    The agents collect information. There are agents based on a software 
    agent and installed in the System to monitor, and network agents - a 
    non-physical agent, without need of installing any software, that 
    executes network tasks in Pandora Network servers and shows 
    information on console.
  </para>
  <para>
    For agents who need to install software into remote systems,
    public key of the machine to be monitored needs to be copied into
    Pandora Data server in order to be able to collect data, as it is specified
    in detail in Pandora Install documentation.
  </para>
  <para>
    Data collected from the agents are stored in small pieces of
    information called "modules". Each module stores only a kind of
    data. The value of each module is the value of one monitored
    variable. The agent must be activated in Pandora Server and a
    group assigned to the agent. The data then begin to be
    consolidated in the database and can be accessed.
  </para>
  <para>
    A network agent NEEDs to be assigned to a Network Server to
    execute network tasks. If you cannot see any Network Servers it's
    because you don't have any Network Server running. Please configure
    and run a Network Server before trying to assign a network module
    to an Agent.
  </para>

  <para>With Pandora Console, user is capable to:</para>

  <itemizedlist>
    <listitem>
      <para>View the agent status</para>
    </listitem>
    <listitem>
      <para>Access to the collected information</para>
    </listitem>
    <listitem>
      <para>Access the monitored values and its evolution in time</para>
    </listitem>
    <listitem>
      <para>View graphic reports</para>
    </listitem>
    <listitem>
      <para>Configure Alerts</para>
    </listitem>
    <listitem>
      <para>
	Configure modules. Define max and minumun valid values for
	each module, set a comprehensive description or even change
	module name (remember that module name must be the same in
	console and in software agent configuration).
      </para>
    </listitem>
    <listitem>
      <para>
		Export tabular data in CSV format.
      </para>
    </listitem>
  </itemizedlist>

  <sect1 id="sec3.1">
    <title>Group Manager</title>

    <para>
      Pandora groups are common to agents, incidents and
      profiles. Groups are added in "Manage Profiles" &gt; "Manage
      Groups" in the Administration menu.
    </para>

    <graphic scale='70' fileref="images/image007.png" valign="bottom" 
	     align="center"/>

    <para>
	 There are several default groups defined in Pandora. You also can
     create your own group (please use given icons or edit and add your own icons).
     You can also modify default ones.
	 </para>

    <para>
      A group is added by clicking "Create group" and assigning a name to it.
    </para>
    <para>
      A group is deleted by clicking the delete icon
      <inlinegraphic scale='70' fileref="images/cancel.png"/> 
      in the right hand side of each group.
    </para>
  </sect1>	
  <sect1 id="sec3.2">
    <title>Adding an agent</title>
    <para>
      You can define new agents. Once defined in Pandora console, it is
      ready to receive data from a Software agent (old agents, based
      on software installed in a remote machine), or from Network
      Agents (assined to a Network Server who runs network tasks to
      monitor remote systems). You can also mix both types of module
	  in the same agent.
    </para>
    <para>
      Please remember that a network agent NEEDs to be assigned to a
      Network Server to execute network tasks. If you can't see any
	  Network Servers it's because you don't have any Network Server
	  running. Please configure and run a Network Server before trying
      to assign a network module to an Agent.
    </para>
    <para>
      An agent is added in "Manage Agents" &gt; "Create agent" in the
      Administration menu.
    </para>

    <graphic scale='70' fileref="images/image008.png" valign="bottom" 
	     align="center"/>

    <para>
      To add a new agent the following parameters must be configured:
    </para>

    <itemizedlist>
      <listitem>
	<para>
	  <emphasis>Agent Name:</emphasis> Name of the agent. This and
	  the "agent name" parameter in Pandora's agent.conf file
	  <emphasis>must have the same value</emphasis>. By default
	  agent takes hostname of the machine where it's running.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>IP Address:</emphasis> IP address of an agent. An
	  agent can share its IP address with other agents. It's only
	  used for informational purposes. In network agents it's useful,
	  because the Server uses this IP address for all new
	  network module definition by default.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Group:</emphasis> Pandora's group the agent
	  belongs to. In this version of Pandora, an agent only can
	  belong to a group.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Interval:</emphasis> Execution interval of an
	  agent. It is the time elapsed in seconds between two
	  consecutive agent executions. An agent could have a 
	  defined interval, but could have modules with different
	  (bigger or smaller) intervals. An agent is considered 
	  "down" (not responding) when Pandora servers (any of them)
	  has no contact with agent in Interval x 2 seconds.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>OS:</emphasis> The Operating System to be
	  monitored. The supported Operating Systems are: AIX, BeOS,
	  BSD, Cisco, HP-UX, Linux, MacOS, Other, Solaris, Windows. 
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Description:</emphasis> Brief description of an agent.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Module definition:</emphasis> There are two state
	  for a module:
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Learning mode:</emphasis> All the modules sent
	  by the agent are accepted. If modules are not defined, they
	  will be automatically defined by the system. It is recommended
	  to activate the agents in this mode and change it once the
	  user is familiar with Pandora FMS.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Normal mode:</emphasis> The modules in this mode
	  must be configured manually. The self definition of the
	  modules is not allowed in this mode.
	</para>
      </listitem>
      <listitem>
	<para>
	  <emphasis>Disabled:</emphasis> This parameter shows if the
	  agent is activated and ready to send data or
	  deactivated. The deactivated agents don't appear in the user
	  views.
	</para>
      </listitem>
    </itemizedlist>
    <sect2 id="sec3.2.1">
      <title>Assigning modules</title>

      <para>Pandora's agents use the operating system own commands to
      monitor a device. Pandora's server will store and process the
      output generated by those commands. The commands are called
      "modules".</para>

      <para>If the agent had been added in "normal mode", the modules
      to be monitored should have been assigned. Those modules must be
      configured in the agent configuration file.</para>

      <para>The modules to be processed by Pandora Server are
      assigned in the "Manage Agents" option, Administration menu. A
      list with all the agents in Pandora will be shown here.</para>

      <para>You'll get a form with all the agent's settings when the
      agent name is clicked. In the same screen there is a section to
      assign modules.</para>

      <graphic scale='70' fileref="images/image009.png" valign="bottom" 
	       align="center"/>

      <para>
	To add a module is necessary to fill some of the following fields:
      </para>
      <para>
	 <emphasis>Module type</emphasis>: type of module,there are the 
	 following types of modules:
      </para>
      <itemizedlist>
	  <listitem>
	    <para>
	      <emphasis>generic_data</emphasis>: numeric data type.
	    </para>
	  </listitem>
	<listitem>
	  <para>
	    <emphasis>generic_data_inc</emphasis>: incremental
	    numerical data type. It stores data resulting from
	    difference between last agent data and actual data.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <emphasis>generic_data_proc</emphasis>: Boolean data type:
	    0 means False or "bad values", and 1 means True or "good"
	    value. Generic Proc types are also called "monitors"
	    because could say if something is "ok" or is "wrong". They
		Are displayed in agent view as little lamps. Red if 0, Green
	    if 1.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <emphasis>generic_data_string</emphasis>: Alphanumeric data
	    type (text string, max. 255 characters).
	  </para>
	</listitem>

	<listitem>
	  <para>
	    <emphasis>generic_icmp</emphasis>: get network latency in
	    miliseconds for remote system.
	  </para>
	</listitem>

	<listitem>
	  <para>
	    <emphasis>generic_icmp_proc</emphasis>: makes a "ping" to
	    remote system. Report 0 if system is not reachable or not
	    responding.
	  </para>
	</listitem>

	<listitem>
	  <para>
	    <emphasis>generic_tcp_proc</emphasis>: makes a "tcp" ping
	    to remote systems and reports "1" if a listing port is
	    responding. Optionally, you may pass parameters in "TCP
	    SEND" (you can use the macro ^M to send carriage returns)
	    and wait to receive string defined in "TCP RECEIVE". If
	    Pandora Network Server received TCP RECEIVE string, it
	    returns 1 (ok), else returns 0 (wrong). 
	  </para>
	</listitem>

	<listitem>
	  <para>
	    <emphasis>generic_tcp_data: generic_tcp_string,
	    generic_tcp_inc</emphasis>, gets numerical data, string
	    data or incremental data from TCP open port. If it cannot
	    connect, no value returned.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <emphasis>generic_snmp types:</emphasis>: they get
	    information using SNMP interface. If you enter SNMP
	    community and IP address, you can walk SNMP MIB from
	    target using SNMP v1 protocol, and all MIB variables will
	    be listed to allow you choose one. You can also enter MIB
	    using numerical OID or human - understandable format.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <emphasis>generic_ucp_proc</emphasis>: makes a "udp" ping
	    to remote systems and reports "1" if a listing port is
	    responding and 0 if are not responding.
	  </para>
	</listitem>
      </itemizedlist>
      <para>
	 <emphasis>Module Group</emphasis>: It is possible to group
	 modules in the following groups: General, Networking,
	 Application, System and Misscellaneous:
      </para>
      <para>
	  <emphasis>Module Name</emphasis>: Name of the module.
      </para>
      <para>
	  <emphasis>Module Interval</emphasis>: Interval of time in seconds 
	  that the agent waits between two consecutive executions.
      </para>
      <para>
	 <emphasis>Target IP</emphasis>: IP of the agent.
      </para>
      <para>
	 <emphasis>TCP port</emphasis>: TCP port to monitor, it is possible 
	 to configure UDP port if the module type generic_udp_proc is chosen.
      </para>
      <para>
	  <emphasis>SNMP OID</emphasis>: SNMP OID to monitor. If you 
	  configure the MIBs in pandora is possible to get the value.
      </para>
      <para>
	  <emphasis>SNMP Community</emphasis>: Community necessary to monitor 
	  a SNMP OID.
      </para>
      <para>
	   <emphasis>TCP send</emphasis>: Parameters to send to TCP port.
      </para>
      <para>
	   <emphasis>TCP receive</emphasis>: Field to configure the 
	   parameters which we expect to receive in a TCP connection.
      </para>
      <para>
          <emphasis>Maximum:</emphasis>: Upper threshold for the
          value in the module. Any value above this threshold will
		  be taken as invalid and the whole module will be
		  discarded.
      </para>
      <para>
         <emphasis>Minimum:</emphasis>: Lower threshold for the
         value in the module. Any value below this threshold will
         be taken as invalid and the whole module will be
         discarded.
      </para>
	  <para>
	    <emphasis>Comments:</emphasis>: Comments added to the 
	    module.
	  </para>
      <para>
		All the modules to be monitored by an agent can be reviewed
		by accessing the agent in the "Manage Agents" option,
		Administration menu.
      </para>
      
      <graphic scale='70' fileref="images/image010.png" valign="bottom"
	       align="center"/>
      
      <para>
		In this screen the modules can be:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	    Deleted by clicking <inlinegraphic scale='70'
	    fileref="images/cancel.png"/>
	  </para>
	</listitem>
	<listitem>
	  <para>
	    Edited by clicking <inlinegraphic scale='70'
	    fileref="images/config.png"/>
	  </para>
	</listitem>
      </itemizedlist>

      <para>
		However, the type of data of the module can't be modified.
      </para>
    </sect2>
    <sect2 id="sec3.2.2">
      <title>Alerts</title>
      
      <para>
	An alert is Pandora's reaction to an "out of range" module
	value. The Alert can consist of sending an e-mail or SMS to
	the administrator, sending a SNMP trap, write the incident
	into the system syslog or Pandora log file, etc. Basically,
	anything that can be triggered by a script configured 
	in the Operating System where Pandora Servers run.
      </para>
      <sect3 id="sec3.2.2.1">
	<title>Adding an Alert</title>
	
	<para>
	  The existing Alerts are accessed by clicking on the "Manage
	  Alerts" option, Administration menu.
	</para>
	<para>There are 6 default types of Alerts:</para>
	
	<itemizedlist>
	  <listitem>
	    <para>
	      <emphasis>eMail</emphasis>. Sends an e-mail from Pandora's Server
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	      <emphasis>Internal audit</emphasis>. Writes the incident
	      in Pandora's internal audit system, that is stored in Pandora SQL database.
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>LogFile</emphasis>.Writes the incident in the log 
		file. Use this in combination with a customized LogFile alert to generate
 		logfiles using the format you want.
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>SMS Text</emphasis>. Sends an SMS to a 
	     given mobile phone, of course, you need to define a alert before to make this possible
	     and a email/Sms gateway configured and accesible from pandora server.
     	</para>
	  </listitem>
	  <listitem>
	    <para>
	     <emphasis>SNMP Trap</emphasis>. Sends a SNMP Trap.
     	</para>
	  </listitem>
	  <listitem>
	    <para><emphasis>Syslog</emphasis>. Sends an alert to the Syslog
    	</para>
	  </listitem>
	</itemizedlist>
	
	<graphic scale='70' fileref="images/image011.png" 
		 valign="bottom" align="center"/>
	
	<para>
	  An Alert is deleted by clicking on the delete icon 
	  <inlinegraphic scale='70' fileref="images/cancel.png"/> 
	  placed on the right hand side of the Alert. 
	  A new customised Alert can be created clicking in "Create
	  Alert".
	</para>
	
	<para>The values "_field1_", "_field2_" and "_field3_" 
	in the customised Alerts are used to build the command 
	line that the machine where Pandora resides will execute
	- if there were several servers, the one in Master mode.
	</para>
	
	<graphic scale='70' fileref="images/image012.png" 
		 valign="bottom" align="center"/>
	
	<para>
	 When a new Alert is created the following field must be 
	 filled in:
      	</para>
	<itemizedlist>
	  <listitem>
	    <para><emphasis>Alert name:</emphasis> The name of the Alert
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	     <emphasis>Command:</emphasis> Command the Alert will 
	     trigger
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>Description:</emphasis> Description of the 
		    Alert
	    </para>
	  </listitem>
	</itemizedlist>
	
	<para>
	  In 'Command' data field these variables are used to build 
	  the command line that the machine where Pandora resides will 
	  execute - if there were several servers, the one in Master 
	  mode, replacing at runtime:
	</para>
	
	<itemizedlist>
	  <listitem>
	    <para><emphasis>_field1_</emphasis>: 
	    Field #1, usually assigned as username, 
	    e-mail destination or single identification for this event
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>_field2_</emphasis>: 
	    Field #2, usually assigned as short 
	    description of events, as subject line in e-mail
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>_field3_</emphasis>: 
	    Field #3, a full text explanation 
	    for the event</para>
	  </listitem>
	  <listitem>
	    <para>><emphasis>_agent_</emphasis>: Agent name</para>
	  </listitem>
	  <listitem>
	    <para><emphasis>_timestamp_</emphasis>: 
	    A standard representation of date and time. 
	    Replaced automatically when the event has been fired
	    </para>
	  </listitem>
	  <listitem>
	    <para><emphasis>_data_</emphasis>: The data value that
	     triggered the alert
	    </para>
	  </listitem>
	</itemizedlist>
      </sect3>
      <sect3 id="sec3.2.2.2">
	<title>Assigning Alerts</title>
	
	<para>
	  The next step after an agent has been added, its 
	  modules have been configurated and the alerts have been 
	  defined, is assign those alerts to the agent.
	</para>
	
	<para>
	  This is done by clicking on the agent to be configured in the 
	  "Manage Agents" option, Administration menu. 
	  The Alert association form is placed at the bottom of that 
	  page.
	</para>
	
	<graphic scale='60' fileref="images/image013.png" 
		 valign="bottom" align="center"/>
	
	<para>
	 To assign an alert the next fields must be filled in:
 	</para>
	
	<itemizedlist>
	  <listitem>
	    <para>
	    <emphasis>Alert type:</emphasis> This can be selected from 
	    the list of alerts that have been previously generated.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Maximum Value:</emphasis> Defines the maximum 
	    value for a module. Any value above that threshold will 
	    trigger the Alert.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Minimum Value:</emphasis> Defines the minimum 
	    value for a module. Any value below that will trigger the
	    Alert. Both maximum and minimum values define "the acceptable" values
	    that Pandora FMS consider "valid", outside this values, Pandora will consider as
	    alert candidate.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Description:</emphasis> Describes the function of 
	    the Alert, and it is useful to identify the Alert amongst 
	    the others in the Alert General View.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Field #1 (Alias, name):</emphasis> Define the 
	    used value for the "_field1_" variable.
    	</para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Field #2 (Single Line):</emphasis> Define the 
	    used value for the "_field2_" variable.
    	</para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Field #3 (Full Text):</emphasis> Define the used 
	    value for the "_field3_" variable.
    	</para>
	  </listitem>
	  <listitem>
	    <para>
	    <emphasis>Time threshold:</emphasis> Minimum duration 
	    between the firing of two consecutive alerts, in seconds. 
	    You can choose between the interval configured or to define 
	    other interval.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
		 <emphasis>Min number of alerts:</emphasis> Minimum number 
	 of alerts that can be sent consecutively.
		</para>
	  </listitem>
	  <listitem>
	     <para>
	      <emphasis>Max number of alerts:</emphasis> Maximum number 
	      of alerts that can be sent consecutively. If you set it to 0 no alerts
	      will be send.
	     </para>
	  </listitem>
	  <listitem>
	    <para>
	     <emphasis>Assigned module:</emphasis> 
	     Module to be motitorized by the alert.
    	    </para>
	  </listitem>
	</itemizedlist>
	<para>
	All the alerts of an agent can be seen through "Manage Agents"
	in the Adminitration menu and selecting the agent.
	You need to use TimeThreshold in cooperation with max. number of alerts. Let's see an example:</para>	
	<para>
	"I want to fire an alert when XXX goes down, and please, dont't disturb me again at least for one hour, then, if this thing continue to be down, fire another alert and wait another hour".
	</para>
	<para>
	You need to setup: Time threshold 3600 (1 Hour), Min. number of alerts = 1,  Max. number of alerts = 1
	</para>
      </sect3>
    </sect2>
    <sect2 id="sec3.2.3">
      <title>Agent module and agent's alert management</title>
      <para>It might happen that the user finds that modules and alerts
      configured for an agent would be repeated in a new agent.
      </para>
      <para>In order to simplify the administrator's work Pandora offers
      the option of copying modules and alerts defined in an agent to 
      be assigned to another.
      </para>
      <para>The screen is accessed through "Manage Agents" &gt;
      "Manage Config.", in the Administration menu:
      </para>
      <graphic scale='70' fileref="images/image014.png" valign="bottom"
	       align="center"/>
      <para>
	Source Agent menu permits the selection of the agent where the
	needed modules and/or alerts reside. The "Get Info" button
	shows the modules for that agent in the Modules list box.
      </para>
      <para>
	<emphasis>Copy process</emphasis> is performed to copy the
	module and/or alert configuration from the selected source
	agents to the selected destination agents. Several agents can
	be selected, pressing CTRL and the mouse right button
	simultaneously. The two tick boxes at the top of the form
	will be used to specify if the configuration to copy is from
	modules and/or from alerts.
      </para>
      <para>
	<emphasis>Deletion process</emphasis> is performed to delete
	the configuration of the destination agents, in the multiple
	selection list box. Several agents can be selected at a time,
	and the tick boxes at the top of the form indicate whether it
	is the modules or the alerts configuration what is to be
	deleted. The application will prompt to confirm the deletion,
	as once deletion is performed, the data associated to them
	will also be deleted.
      </para>
    </sect2>
    <sect2 id="sec3.2.4">
      <title>Agents group detail</title>
      <para>
	Once you have configured your groups and agents, you can see
	the status of the groups of agents through "View Agents", in
	the Operation Menu.
      </para>
      <para>
	If you pass the mouse over any group image, you'll see the
	number of agents of that group as well the number of monitors,
	organized by status.
      </para>

      <para>
	By pressing the icon
	<inlinegraphic scale='70' fileref="images/target.png"/> 
	at the right of any group image, you will update the info of 
      that group.
      </para>
    </sect2>
  </sect1>
  <sect1 id="sec3.3">
    <title>Agent monitoring</title>
    <para>
      When the agents begin to send data to the server, and
      it is added in the Web console, Pandora processes and inserts
      the data in the Database. The data are consolidated and can be
      accessed from the Web console, either as row data or as
      graphs.
     </para>
    <sect2 id="sec3.3.1">
      <title>Agent view</title>
     <para>
	All the Agents can be accessed from the Operation menu.
     </para>
     <para>
	You can view the agents in group by clicking "View agents".
	From here the status of the agents can be quickly reviewed 
	thanks to a simple system coloured circles and bulbs that 
	appear when the user pass the mouse on a group.
      </para>
	<graphic scale='70' fileref="images/groups.png" valign="bottom"
		 align="center"/>
      <para>
	To view all the Agents of the group just click in the icon of the group.
      </para>
      <graphic scale='60' fileref="images/image015.png" valign="bottom"
		 align="center"/>
      <para>
      The list of agents shows all the relevant the information
      in the following columns:
      </para>

      <para><emphasis>Agent:</emphasis> Shows the agent's name.</para>
      <para>
       <emphasis>SO:</emphasis> Displays an icon that represents the
       Operating System.
      </para>
      <para>
       <emphasis>Interval:</emphasis> Shows the time interval (seconds)
       in which the agent sends data to the server.
      </para>
      <para>
	<emphasis>Group:</emphasis> This is the group the agent belongs
	to.
      </para>
      <para>
	<emphasis>Modules:</emphasis> Under normal circumstances this
	field shows the values representing the number of modules and
	the number of monitors, both in black. If the status of a
	monitor changes to "incorrect", one additional number is
	shown: the number of modules, the number of monitors and the
	number of monitors with "incorrect" status, all in black save
	the last one.
      </para>
      <para>
	<emphasis>Status:</emphasis> Shows the "general" status of the 
	agent through the following icons:
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_green.png"/> 
	All the monitors are OK. It's the ideal status.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_white.png"/> 
	No defined monitors. Sometimes nothing is monitored
	that could be right or wrong, and only numeric or 
	text data is reported.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_red.png"/> 
	At least one of the monitors is failing. Usually we
	want to avoid this, and keep our systems in a healthy 
	green colour.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_blue.png"/> The 
	agent doesn't have any data. New agents with an empty data
	package can have this status.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_yellow.png"/> 
	Colour shifting from green to red. This icon indicates that
	the agent has just changed its status, from 'All OK' to'we have
	a problem'.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/b_down.png"/> When an 
	agent is down or there is no news from it for 2 times the 
	Interval value in seconds. Usually it is due to a communication 
	issue or a crashed remote system.
      </para>
      <para>
       <emphasis>Alerts:</emphasis> Shows if any alerts have been sent 
       through the following icons:
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/dot_green.png"/> 
	No alerts have been sent.
      </para>
      <para>
	<inlinegraphic scale='70' fileref="images/dot_red.png"/> 
	Shown when at least one alert has been sent within 
	the time threshold of the alert.
      </para>
      <para>
       <emphasis>Last contact:</emphasis> Shows date and time of 
       the last data package sent by the agent, using a progress bar, 
       according to value of the interval. If you see the image 
       <inlinegraphic scale='70' fileref="images/outof.png"/>, 
       the agent has not send data during the interval. 
       Passing the mouse over the image will show you the last contact 
       in date and time format.
      </para>
      <para>
       <emphasis>Note:</emphasis> The icon <inlinegraphic scale='70'
      fileref="images/setup.png" width="15"/> is only visible if you're
      and administrator and it's a link to the "Manage Agents" &gt;
      "Update Agent" option in the Administration menu.
      </para>
    </sect2>
    <sect2 id="sec3.3.2">
      <title>Accessing the data of an agent</title>
      <para>
	  When an agent is accessed, by clicking on its name, all the
      information related to that agent is displayed.
	  </para>
      <sect3 id="sec3.3.2.1">
	<title>Agent general info</title>
	<para>
	 This shows the data introduced when the agent was created and
	 the total number a data packages the agent has sent.
 	</para>
	<graphic scale='70' fileref="images/image016.png" 
		 valign="bottom" align="center"/>
      </sect3>
      <sect3 id="sec3.3.2.2">
	<title>Last data received</title>
	
	<para>
	 This is the description of all the agent modules been
	 monitored.
 	</para>
	<graphic scale='55' fileref="images/image017.png" 
		 valign="bottom" align="center"/>
	<para>
	 In this list the module information is showed in the following 
	 columns:
	</para>
	
	<para>
	 <emphasis>Module name:</emphasis> Name given to the module in
	 the agent's config file.
 	</para>
	<para>
	 <emphasis>Module type:</emphasis> Type of module as described 
	 in Asigning Modules section.
	</para>
	<para>
	 <emphasis>Description:</emphasis> Description given to the 
	 module in the agent's config file.
	</para>
	<para>
	 <emphasis>Data:</emphasis> Last data sent by the agent.
	</para>
	<para>
	 <emphasis>Graph:</emphasis> Monthly(M), Weekly(W), Daily(D)
	and Hourly(H) graphs are generated with the data sent by the 
	agent against time.
	</para>
	<para>
	 On the left hand side of the graph the newst data is
	 represent, and on the right had side the oldest.
	</para>
	<para>
	The generated graphs are:
	</para>
	<para> - <emphasis>Hourly graph</emphasis> 
	(<inlinegraphic scale='70' fileref="images/grafica_h.png"/>)
	covers a 60 minute interval
	</para>
	<graphic scale='70' fileref="images/image018.png" 
		 valign="bottom" align="center"/>
	
	<para> - <emphasis>Daily graph</emphasis> 
	(<inlinegraphic scale='70' fileref="images/grafica_d.png"/>) 
	covers a 24 hour interval
	</para>
	<graphic scale='70' fileref="images/image019.png" 
		 valign="bottom" align="center"/>
	
	<para> - <emphasis>Weekly graph</emphasis> 
	(<inlinegraphic scale='70' fileref="images/grafica_w.png"/>) 
	covers a 7 day interval
	</para>
	<graphic scale='70' fileref="images/image020.png" 
		 valign="bottom" align="center"/>
	
	<para> - <emphasis>Mothly graph</emphasis> 
	(<inlinegraphic scale='70' fileref="images/grafica_m.png"/>) 
	covers a 30 day interval
	</para>
	<graphic scale='70' fileref="images/image021.png" 
		 valign="bottom" align="center"/>
	<para>
	 <emphasis>Raw Data:</emphasis> This is the raw data sent by 
	 the agent
	</para>
	<para>
	 - <inlinegraphic scale='70' fileref="images/data_m.png"/> Last 
	month
	</para>
	<para>
	 - <inlinegraphic scale='70' fileref="images/data_w.png"/> Last 
	week
	</para>
	<para>
	 - <inlinegraphic scale='70' fileref="images/data_d.png"/> Last 
	day
	</para>
	
	<para>
	 <emphasis>Timestamp:</emphasis> This is the hour when last 
	 contact was made.
	</para>
      </sect3>
      <sect3 id="sec3.3.2.3">
	<title>Complete list of monitors</title>
	
	<para>This is the description of all the monitors defined by
	the agent</para>
	
	<graphic scale='55' fileref="images/image022.png" 
		 valign="bottom" align="center"/>
	
	<para>
	 The list shows the information about the monitors in the
	 following columns:
	</para>
	<para>
	 <emphasis>Agent:</emphasis> Agent where the monitor is 
	defined.
        </para>
	<para>
	 <emphasis>Type:</emphasis> Data type of the monitor. For a
	 monitor this value is always of the generic_proc type.
        </para>
	<para>
	 <emphasis>Module name:</emphasis> Name given to the module   
	 when it was created.
        </para>
	<para>
	 <emphasis>Description:</emphasis> Description given to the 
	 modulein the agent's config file.
        </para>
	<para>
	 <emphasis>Status:</emphasis> The table shows the agent status 
	 through the following icons:
        </para>
	<para>
	 <inlinegraphic scale='70' fileref="images/b_green.png"/> 
	 The monitor is OK
        </para>
	<para>
	 <inlinegraphic scale='70' fileref="images/b_red.png"/> 
	 The monitor is failing
        </para>
	<para>
	 <emphasis>Last contact:</emphasis> Shows the time and date of 
	 the last data packaged received from the agent
        </para>
      </sect3>
      <sect3 id="sec3.3.2.4">
	<title>Complete list of alerts</title>
	<para>
	  This is the description of all the alerts defined in the
	  agent
	</para>
	<graphic scale='55' fileref="images/image023.png"
		 valign="bottom" align="center"/>
	<para>
	  The arlert information is shown in the list divided in the
	  following fields:
	</para>
	<para>
	  <emphasis>Type:</emphasis> Type of alert.
	</para>
	<para>
	<emphasis>Name:</emphasis> Name given to the alert when it
	was created.
	</para>
	<para>
	  <emphasis>Description:</emphasis> Description given to the
	  alert when it was created.
	</para>
	<para>
	<emphasis>Min/Max:</emphasis> The values Mininimun and Maximum
	configured in the alert.
	</para>
	<para>
	<emphasis>Time threshold:</emphasis> The time threshold  
	configured in the alert.
	</para>
	<para>
	  <emphasis>Last fired:</emphasis> The last time the alert was
	  executed.
	</para>
	<para>
	  <emphasis>Times Fired:</emphasis> Number of times the alert
	  was launched.
	</para>
	<para>
	  <emphasis>Status:</emphasis> Shows if the alert has been
	  sent through the following icon:
	</para>
	<para>
	  <inlinegraphic scale='70' fileref="images/dot_green.png"/>
	  No alerts have been sent
	</para>
	<para>
	  <inlinegraphic scale='70' fileref="images/dot_red.png"/> At
	  least one alert has been sent
	</para>
      </sect3>
    </sect2>
    <sect2 id="sec3.3.3">
      <title>Alert details</title>
      <para>
	The description of all the alerts defined in the server can be
	viewed from the "View Agents" &gt; "Alert Details" option in
	Operation menu.
      </para>
      <graphic scale='70' fileref="images/image027.png"
	       valign="bottom" align="center"/>
      <para>
	In this list all the alerts appear in a similar way as in the
	individual view, but now they are shown all together.  This
	allows a deeper analisys of each alert.
      </para>
    </sect2>
    <sect2 id="sec3.3.4">
	<title>Monitor details</title>
	<para>
	The description of all the monitors defined in the server 
	(a monitor is a module of "proc" type) can
	be viewed from the "View Agents" &gt; "Monitor detail" option
	in the Operation menu.
	</para>
	<graphic scale='70' fileref="images/image026.png"
		 valign="bottom" align="center"/>
	<para>
	   In this list all the monitors appear in a similar way as in
	   the individual view, but now they are shown all together.
	   This allows a deeper analisys of each monitor.
	</para>
    </sect2>
    <sect2 id="sec3.3.5">
      <title>Export Data</title>

      <para>
	The Data Export tool can be found in the "View Agents" &gt;
	"Export data" option in the Operation Menu.
      </para>

      <para>
	Three parameters need to be configured for exporting data: the
	agent where data resides, the modules to be exported and the
	date interval of the data to be exported:
      </para>

      <graphic scale='70' fileref="images/image028.png" valign="bottom" 
	       align="center"/>

      <para>The fields in the results of Exporting data are:</para>

      <para>
       <emphasis>Module:</emphasis> Module name.
      </para>
      <para>
       <emphasis>Data:</emphasis> Data contained by the module.
      </para>
      <para>
       <emphasis>Timestamp:</emphasis> Date and time of the the package 
       was sent by the agent.
      </para>
      <graphic scale='70' fileref="images/image029.png" valign="bottom" 
	       align="center"/>
      <para>
       Selecting the CSV format for the output, a text file with
       extension <emphasis>.csv</emphasis> is be created. The data 
       is qualified by single quotes and the fields separated by 
       commas:
      </para>
      <graphic scale='70' fileref="images/image030.png" valign="bottom" 
	       align="center"/>
    </sect2>
    <sect2 id="sec3.3.6">
      <title>Statistics</title>
      <para>
       Two kinds of graphical statistics are displayed from the 
       "View Agents" &gt; "Statistics" option, in the Operation 
       menu:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	  A graph with the number of modules configurated for each
	  agent
      </para>
	</listitem>
	<listitem>
	  <para>
	   A graph with number of packages sent by each Agent. A 
	   package is the number of values from the modules the agent 
	   sends after each time interval
	   </para>
	</listitem>
      </itemizedlist>
      <graphic scale='70' fileref="images/image031.png"
	       valign="bottom" align="center"/>
      <graphic scale='70' fileref="images/image032.png"
	       valign="bottom" align="center"/>
      <graphic scale='70' fileref="images/image033.png"
	       valign="bottom" align="center"/>
    </sect2>
  </sect1>
  <sect1 id="sec3.4">
    <title>SNMP Console</title>
    <para>
      Majority of devices can send SNMP traps when have any problem as
      reboot, lost interface, the temperature is very high, CPU crash,
      etc. With Traps is possible to know the problem when it happens.
    </para>
    <para>
      In Pandora 1.2 there is a SNMP console to receive SNMP traps. 
      It is possible configure any device to send SNMP traps to
	  Pandora FMS, you only need the Pandora IP and Community. 
    </para>
    <para>      
      From SNMP Console in the Operation menu the users can see
	  the SNMP traps sent to Pandora Server.
    </para>
       <graphic scale='55' fileref="images/SNMP_console.png" 
		valign="bottom" align="center"/>
    <sect2 id="sec3.4.1">
      <title>SNMP Alerts</title>
      <para>
	Just like is possible to generate an alert if there is an out of 
	range module value. It is possible to generate an alert if an
	SNMP trap is received with a anorma value. The Alert can consist of 
	sending and e-mail or SMS to the administrator, sending an SNMP 
	trap, write the incident into the system syslog or Pandora log 
	file, etc. Basically anything that can be triggered by a 
	script configured in the Operating System when Pandora Servers run.
      </para>
      <para> 
	 In "SNMP Console" &gt; "SNMP Alerts" from Operation menu, the users
	 can see the configured SNMP Alerts.
      </para>
      <graphic scale='55' fileref="images/SNMP_alert.png" 
	       valign="bottom" align="center"/>
    <para> - 
	To create a new alert the administrator must click in 
	<inlinegraphic scale='50' 
	fileref="images/SNMP_alert_create.png"/>. Then appears the
	following screen:
	</para>
	<graphic scale='70' fileref="images/SNMP_alert_create1.png" 
		 valign="bottom" align="center"/>
	<para>
	 To assign an Alert the next fields must be filled in:
	</para>
	<itemizedlist>
	   <listitem>
		<para>
		 <emphasis>Alert:</emphasis> This can be selected from 
		 the list of alerts that have been previously generated.
		</para>
	   </listitem>
	   <listitem>
		<para>
		<emphasis>Alert type:</emphasis> You can chose between 
		"OID", "Custom OID/value" or "SNNMAgent".
		</para>
	   </listitem>
	   <listitem>
		 <para>
		  <emphasis>Description:</emphasis> Describes the 
		  function of the Alert, and it is useful to identify 
		  the Alert amongst the others in the Alert General 
		  View.
		 </para>
	   </listitem>
	   <listitem>
		   <para>
		   <emphasis>OID:</emphasis> The OID to be motitorized 
		   by the alert.
		   </para>
	   </listitem>
	   <listitem>
		<para>
		<emphasis>Custom value:</emphasis> Custom value to be 
		motitorized by the alert.
		</para>
	    </listitem>
	    <listitem>
		<para>
		<emphasis>SNMP Agent IP:</emphasis> IP of the SNMP 
		agent.
		</para>
	     </listitem>
	     <listitem>
		<para>
		<emphasis>Field #1 (Alias, name):</emphasis> Define the 
		used value for the "_field1_" variable.
		</para>
	     </listitem>
	     <listitem>
		<para>
		<emphasis>Field #2 (Single Line):</emphasis> Define the 
		used value for the "_field2_" variable.
		</para>
	      </listitem>
	      <listitem>
		<para>
		<emphasis>Field #3 (Full Text):</emphasis> Define the 
		used value for the "_field3_" variable.
		</para>
	       </listitem>
		<listitem>
		 <para>
		 <emphasis>Min number of alerts:</emphasis> Minimum 
		 number of alerts that can be sent consecutively.
		 </para>
		</listitem>
		<listitem>
		 <para>
		 <emphasis>Max number of alerts:</emphasis> Maximum 
		 number of alerts that can be sent consecutively.
		 </para>
		</listitem>
		<listitem>
		 <para><emphasis>Time threshold:</emphasis> Minimum 
		 duration between the firing of two consecutive 
		 alerts, in seconds.
		 </para>
		</listitem>
	</itemizedlist>
    </sect2>
  </sect1>
</chapter>
