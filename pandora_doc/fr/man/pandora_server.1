Pandora(Server)                                                Pandora(Server)



NNAAMMEE
       pandora_server - PandoraFMS Server


AAVVAAIILLAABBIILLIITTYY
       Linux, AIX, Solaris.


DDEESSCCRRIIPPTTIIOONN
       Pandora  FMS 1.2 has three kind of servers: Data server, Network Server
       and SNMP Server/Trap console.  All of them could be  installed  in  the
       same  machine  or  in different machines, also, you could setup many of
       them in a High Availability environment or using  it  to  manage  highs
       loads of data.


SSYYPPNNOOSSIISS
       PPaannddoorraa DDaattaa SSeerrvveerr

       To  build  Pandora Data Server you need to have the following perl mod-
       ules and software installed in your machine.  This  packages  could  be
       installed using your distribution packaging system or using CPAN.

         • XML::Simple, useful XML functions
         • Digest::MD5, MD5 generation
         • Time::Local, Date and Time basic manipulation
         • DBI, DB interface with MySQL
         •  Date::Manip, needed to manipulate Date and Time formats of input,
       output and compare

       You can find them at http://www.cpan.org or install using your  default
       package instalation system. These packages are in the default distribu-
       tion of Suse 9.1 and Debian 3.0 GNU/Linux. Also available  for  Solaris
       in  CPAN  repository. Next, you need to set the TZ (Time Zone) environ-
       ment variable.

       PPaannddoorraa NNeettwwoorrkk SSeerrvveerr

       Requires SSH Server and Perl v5.8 or higher and the next Perl Modules:

         • IO::Socket, manage and manipulation of TCP/UDP sockets
         • Time::HiRes, needed for ICMP times
         • Time::Local, Date and Time basic manipulation
         • SNMP, for SNMP management
         • Date::Manip, needed to manipulate Date and Time formats of  input,
       output and compare
         •  Net::Ping,  to  calculate  latency times (it’s required that the
       server runs as root user).

       To use SNMP fuctions it’s needed also to have installed  the  net-snmp
       package.  It ’s  worth to say that to run modules of GENERIC_ICMP_DATA
       type (calculate ICMP latency time) Pandora Network Server must run with
       root privileges.

       PPaannddoorraa SSNNMMPP SSeerrvveerr

       You  need  to  install  the  NET-SNMP  package which is included in all
       GNU/Linux distributions. You have to use the snmptrapd binary and  copy
       or  link  it to $HOME_PANDORA/util, where $HOME_PANDORA is the instala-
       tion directory of Pandora.

       This binary gets the SNMP traps, generating a log that is parsed by the
       Pandora Server.

       IInnssttaalllliinngg PPaannddoorraa SSeerrvveerr

       Create  the  /opt/pandora  directory  and "gunzip" and "untar" here the
       pandora_server_1.2.tar.gz file.

       Create an user pandora in OS. Usually you do  that  in  GNU/Linux  with
       commands:

       _u_s_e_r_a_d_d_d _p_a_n_d_o_r_a _-_d _/_h_o_m_e_/_p_a_n_d_o_r_a
       _m_k_d_i_r _/_h_o_m_e_/_p_a_n_d_o_r_a
       _c_h_o_w_n _p_a_n_d_o_r_a _/_h_o_m_e_/_p_a_n_d_o_r_a

       This user will be used by the SSH transfers to the server, so this user
       will need a strong password.

       In the ﬁle /home/pandora/.ssh/authorized_keys we will add  the  public
       key of each agent which send data to Pandora Server. These keys must be
       SSH v2, OpenSSH DifﬁeHellman (DF) or RSA. To convert between keys  you
       can  use  the  ssh-keygen tool. Pandora Server will check and parse XML
       ﬁfiles sent by  Pandora  Agents  and  will  insert  the  datainto  the
       Database.

       Check  launch  scripts  (pandora_network, pandora_server, pandora_snmp)
       and check for pathnames in the  first  two  variables  in  script.  roa
       Server. This usually is /opt/pandora_server

       CCoonnffiigguurriinngg yyoouurr nneeww PPaannddoorraa SSeerrvveerr sseettuupp

       After  install Pandora Server in, you will need to edit the ﬁfile pan-
       dora_server.conf, where are defined the variables of the server config-
       uration. File pandora_server.conf is a text ﬁfile, you could edit with
       your prefer text editor, like emacs. This configuration ﬁfile is  com-
       mon  to  all kinds of Pandora Server (Data server, SNMP Server, Network
       server), you also could have different copies of configuration file for
       each  Pandora  Server  you  have.  Edit configuration ﬁfile of Pandora
       Server, usually /opt/pandora/conf/pandora_server.conf and take  a  look
       at the lines:

       _d_b_u_s_e_r _p_a_n_d_o_r_a
       _d_b_p_a_s_s _p_a_n_d_o_r_a
       _d_b_h_o_s_t _l_o_c_a_l_h_o_s_t

       Please change them to your own data. For security reasons isn’t recom-
       mended use the default values.  These are default values, and all  must
       be  existing  directory  and  ﬁlename and valid username, password and
       hostname.

       Remember: you need to create the directory  /opt/pandora/data_in  where
       Pandora  Server  will  read and write data, sent by remote agents using
       ssh/scp. This directory must be owned or with permissions to write  for
       user "pandora". If you don’t have a "pandora" user yet, create it.

       You  can  run  Pandora Server with an user without privilegues, you can
       use the user "pandora", it only needs to run /usr/bin/perl  and  access
       to /opt/pandora and /opt/pandora/data_in directories.

       This  is  true  with  all  the components but with Pandora SNMP Console
       needs root user to open UDP port 161 (this can be solved setting  SUID0
       to  the  snmptrapd  binary) and running the rest of the Server using an
       user without privileges.

       Also Pandora Network Server can be run using  an  user  without  privi-
       leges,  but  the GENERIC_ICMP_DATA type won’t work, as root privileges
       are required to get ICMP latency times.   Check  the  MySQL  connection
       with the user and password before running the server

       Pandora   Server   distribution   tarball  includes  a  Posix/System  V
       start/stop script for "daemonize" Pandora Server. It is  possible  that
       you  need  to  customize,  but  its runs smoothly on GNU/Linux (debian,
       Suse) and Solaris 8 systems. It has  start|stop|restart  parameters  to
       include  it  in  your default init level directory and it creates a log
       ﬁfile deﬁned in $log_ﬁfile variable (by default is /opt/pandora/pan-
       dora.log): _/_e_t_c_/_i_n_i_t_._d_/_p_a_n_d_o_r_a___s_e_r_v_e_r _s_t_a_r_t

       SSeettttiinngg uupp SSSSHH ccoonnﬁgguurraattiioonn

       Pandora,  uses  SSH protocol to copy XML data packets, generated by the
       agents, to the server. You need to generate a SSH2 key in every  agent,
       and  copy  the public key in /home/pandora/.ssh/authorized_keys, so you
       need to create a user called "pandora" without  privileges.  This  user
       will  be used by agents to copy data into Pandora Data Server /opt/pan-
       dora/data_in directory.

       Please BE SURE that user "pandora" exists (if not,  create  with  user-
       add),  and  /home/pandora/.ssh/authorized_keys  exists and ownership of
       this ﬁle and directory is for pandora user,  and  permissions  set  to
       600.

       Please  be  sure that directory /opt/pandora/data_in exists and pandora
       user is able to write in.


AAUUTTHHOORR
       Pandora Free Monitoring System is made and copyrighted by Sancho Lerena
       <sancho.lerena@artica.es>  Pandora  is  a  project initiated and mainly
       developed by Sancho Lerena, at present other people is working  on  it:
       Raul  Mateos, David Villanueva, Esteban Sanchez, Jose Navarro, Jonathan
       Barajas and Manuel Arostegui We want to thank  many  other  people  who
       help  us with translation, graphic design, bugs reporting and interest-
       ing ideas.



SSEEEE AALLSSOO
       ppaannddoorraa
       ppaannddoorraa__sseerrvveerr
       ppaannddoorraa__aaggeennttss
       ppaannddoorraa__ccoonnssoollee




                                                               Pandora(Server)
