<?xml version="1.0" encoding="utf-8"?> 

<chapter id="chapter8">
  <title>Maintenance de la base de données</title>
  
  <para>
    Le coeur du système Pandora est sa base de données. Toutes les données
    collectées sur les machines monitorées sont stockée dans cette base,
    des données de l'administrateur aux évènement, incidents et données d'Audit
    générées par le système au cours du temps.
  </para>

  <para>
    Il est évident que l'efficacité et la fiabilité de ce module est vital
    pour le fonctionnement correct de Pandora. Une maintenance régulière
    de cette base de données est nécessaire. Pour ce faire, les gérants de
    la base peuvent utiliser les commandes standard MySQL. Maintenir la base
    en bonne condition est critique pour que Pandora fonctionne correctement.
  </para>
  
  <para>
    Comme la taille de la base de données s'accroît linéairement,
    les données seront compressées pour réduire leur nombre, sans perdre
    d'informations importantes, spécialement les graphiques générés avec
    les données traitées.
  </para>
  <para>
    Cliquer sur "Maintenance des bases de données" dans le menu Administration
    affiche la configuration de la base de données comme définie dans la partie
    "Configuration" du menu Administration concernant le compactage et la suppression
    des données.
  </para>
  <graphic scale='70' fileref="images/image054.png" valign="bottom" 
	   align="center"/>
  <sect1 id="sec8.1">
    <title>Information sur la base de données</title>
    <para>
      Les statistiques de la base de données sont générées par Agent, dans
      "Maintenance de la base de données" &gt; "Information base de données"
      du menu Administration, et sont représentées dans deux sortes de graphiques:
    </para>
    <itemizedlist>
      <listitem>
	<para>
	 Nombre de modules configurés pour chaque agent.
 	</para>
      </listitem>
      <listitem>
	<para>
	 Nombre de paquets envoyés par chaque agent. Un paquet est le groupe
	 de données liées au module que l'agent envoie à intervalle régulier.
 	</para>
      </listitem>
    </itemizedlist>
    <graphic scale='70' fileref="images/image055.png" valign="bottom" 
	     align="center"/>
    <graphic scale='70' fileref="images/image056.png" valign="bottom" 
	     align="center"/>
    <graphic scale='70' fileref="images/image057.png" valign="bottom" 
	     align="center"/>
    <para>
     Ces graphiques peuvent aussi être affichés depuis "Voir agents" &gt;
     "Statistiques" dans le menu Operation.
    </para>
    <para>
     Il est possible de voir les informations de la base en mode texte en cliquant sur
	 "Appuyez ici pour voir l'information de la Base de Données en format texte"
    </para>
    <graphic scale='70' fileref="images/DBText.png" valign="bottom" 
	     align="center"/>
  </sect1>
  <sect1 id="sec8.2">
    <title>Nettoyage manuel de la base de données</title>
    <para>
     Pandora repose sur des outils d'administration puissants pour nettoyer manuellement
     la majorité des données stockées dans la base. Cela inclus les données générées
     par les agents et le server lui-même.
    </para>
    <sect2 id="sec8.2.1">
    <title>Nettoyage des données des agents</title>
     <sect3 id="sec8.2.1.1">
      <title>Débogage des données sélectionnées d'un module</title>
      <para>
	L'option de nettoyage de données sélectionnées d'un module est
	utilisée pour éliminer les entrées hors limites (incohérence),
	quelle que soit la raison de leur présence (panne d'agent, données
	hors limites, tests, erreurs de base de données, etc.).
	Eliminer les données erronnées ou non nécessaires produit une
	représentation graphique plus précise et présente les données
	sans pics ou échelles invraissemblables.
      </para>
      <para>
	Depuis "Maintrenance des bases de données" &gt; "Epurer les
	bases de données" du menu Administration, toutes les données hors
	limites rçues d'un module d'un agent peut être éliminée.
      </para>
      <graphic scale='70' fileref="images/image058.png" valign="bottom" 
	       align="center"/>
      <para>
       Les paramètres du nettoyage sont: agent, module, limtes maximum et minimum
       des données. Toutes les données hors de ces limites seront supprimées.
      </para>
      <para>
	Par exemple, pour un module enregistrant le nombre de processus, si nous
        somme intéressés seulement par les valeurs comprises entre 0 et 100, toutes
        les valeurs supérieures à 100 seront considérées comme des erreurs, du "bruit"
        ou des conditions anormales. Si nous prenons une fourchette entre 0 et 100,
        toutes les valeurs supérieures et inférieures (comme -1, 100 ou 100000) seront
        définitivement supprimées de la base de données.
      </para>
     </sect3>
     <sect3 id="sec8.2.1.2">
      <title>Nettoyage de toutes les données des agents</title>
      <para>
	Toutes les valeurs hors limites reçues  par un agent peuvent être
	supprimées depuis "Maintenance de bases de données" &gt; "Effacement base de données" du menu
	Administration.
      </para>
      <para>
	Les données sont supprimées via les paramètres suivants depuis
	l'écran "Effacement base de données":
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	   Effacer toutes les données
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de deux semaines
 	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'une semaine
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 jours
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un jour
   	  </para>
	</listitem>
      </itemizedlist>
      <graphic scale='70' fileref="images/image059.png" valign="bottom" 
		align="center"/>
    </sect3>
   </sect2>
   <sect2 id="sec8.2.2">
    <title>Nettoyer les données sytème</title>
    <sect3 id="sec8.2.2.1">
      <title>Nettoyer les données d'Audit</title>
      <para>
	Toutes les données d'Audit générées par le système peuvent être supprimées
	depuis "Maintenance des bases de données" &gt; "Base de données Audit" du menu
        Administration.
      </para>
      <para>
	Les données à supprimer sont sélectionnées en choisissant les options suivantes
	dans l'écran "Epuration de la base de données Audit"
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	   Effacer toutes les données
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de deux semaines
 	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'une semaine
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 jours
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un jour
   	  </para>
	</listitem>
      </itemizedlist>
      <graphic scale='70' fileref="images/image060.png" valign="bottom" 
	       align="center"/>
    </sect3>
    <sect3 id="sec8.2.2.2">
      <title>Nettoyage des évènements</title>
      <para>
	Tous les évènements générés par le système peuvent être supprimés depuis
	"Maintenance des bases de données" &gt; "Base de données des évènements"
        du menu Administration.
      </para>
      <para>
	Les données à supprimer sont sélectionnées en sélectionnant une des options suivantes
	de l'écran "Nettoyer la Base de Données des événements"
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	   Effacer toutes les données
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un mois
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de deux semaines
 	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'une semaine
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus de 3 jours
   	  </para>
	</listitem>
	<listitem>
	  <para>
	   Effacer les données de plus d'un jour
   	  </para>
	</listitem>
      </itemizedlist>
      <graphic scale='70' fileref="images/image061.png" valign="bottom" 
	       align="center"/>
    </sect3>
   </sect2>
  </sect1>
</chapter>
