.TH Pandora Server

.SH NAME

pandora_server - PandoraFMS Server

.SH AVAILABILITY

Linux, AIX, Solaris.

.SH DESCRIPTION

Pandora FMS 1.2 has three kind of servers: Data server, Network Server and SNMP Server/Trap console.
All of them could be installed in the same machine or in different machines, also, you could setup many
of them in a High Availability environment or using it to manage highs loads of data.

.SH SYPNOSIS

.B Pandora Data Server

To build Pandora Data Server you need to have the following perl modules and software installed in your
machine. This packages could be installed using your distribution packaging system or using CPAN.

  • XML::Simple, useful XML functions
.br
  • Digest::MD5, MD5 generation
.br
  • Time::Local, Date and Time basic manipulation
.br
  • DBI, DB interface with MySQL
.br
  • Date::Manip, needed to manipulate Date and Time formats of input, output and compare

You can find them at http://www.cpan.org or install using your default package instalation system. These
packages are in the default distribution of Suse 9.1 and Debian 3.0 GNU/Linux. Also available for
Solaris in CPAN repository. Next, you need to set the TZ (Time Zone) environment variable.

.B Pandora Network Server

Requires SSH Server and Perl v5.8 or higher and the next Perl Modules:

  • IO::Socket, manage and manipulation of TCP/UDP sockets
.br
  • Time::HiRes, needed for ICMP times
.br
  • Time::Local, Date and Time basic manipulation
.br
  • SNMP, for SNMP management
.br
  • Date::Manip, needed to manipulate Date and Time formats of input, output and compare
.br
  • Net::Ping, to calculate latency times (it’s required that the server runs as root user).

To use SNMP fuctions it’s needed also to have installed the net-snmp package. It’s worth to say that to run modules of GENERIC_ICMP_DATA type (calculate ICMP latency time) Pandora Network Server must run with root privileges.

.B Pandora SNMP Server

You need to install the NET-SNMP package which is included in all GNU/Linux distributions. You have to use the snmptrapd binary and copy or link it to $HOME_PANDORA/util, where $HOME_PANDORA is the instalation directory of Pandora.

This binary gets the SNMP traps, generating a log that is parsed by the Pandora Server.

.B Installing Pandora Server

Create the /opt/pandora directory and "gunzip" and "untar" here the pandora_server_1.2.tar.gz file.

Create an user pandora in OS. Usually you do that in GNU/Linux with commands:

.I useraddd pandora -d /home/pandora
.br
.I mkdir /home/pandora
.br
.I chown pandora /home/pandora

This user will be used by the SSH transfers to the server, so this user will need a strong password.

In the ﬁle /home/pandora/.ssh/authorized_keys we will add the public key of each agent which send data to Pandora Server. These keys must be SSH v2, OpenSSH DifﬁeHellman (DF) or RSA. To convert between keys you can use the ssh-keygen tool. Pandora Server will check and parse XML ﬁfiles sent by Pandora Agents and will insert the datainto the Database.

Check launch scripts (pandora_network, pandora_server, pandora_snmp) and check for pathnames in the
first two variables in script. roa Server. This usually is /opt/pandora_server

.B Configuring your new Pandora Server setup

After install Pandora Server in, you will need to edit the ﬁfile pandora_server.conf, where are defined
the variables of the server configuration. File pandora_server.conf is a text ﬁfile, you could edit with
your prefer text editor, like emacs. This configuration ﬁfile is common to all kinds of Pandora Server (Data
server, SNMP Server, Network server), you also could have different copies of configuration file for each
Pandora Server you have.
Edit configuration ﬁfile of Pandora Server, usually /opt/pandora/conf/pandora_server.conf and
take a look at the lines:

.I         dbuser pandora
.br
.I         dbpass pandora
.br 
.I        dbhost localhost

Please change them to your own data. For security reasons isn’t recommended use the default values.
These are default values, and all must be existing directory and ﬁlename and valid username, password
and hostname.

Remember: you need to create the directory /opt/pandora/data_in where Pandora Server will read and
write data, sent by remote agents using ssh/scp. This directory must be owned or with permissions to
write for user "pandora". If you don’t have a "pandora" user yet, create it.

You can run Pandora Server with an user without privilegues, you can use the user "pandora", it only
needs to run /usr/bin/perl and access to /opt/pandora and /opt/pandora/data_in directories.

This is true with all the components but with Pandora SNMP Console needs root user to open UDP port
161 (this can be solved setting SUID0 to the snmptrapd binary) and running the rest of the Server using
an user without privileges.

Also Pandora Network Server can be run using an user without privileges, but the
GENERIC_ICMP_DATA type won’t work, as root privileges are required to get ICMP latency times.
Check the MySQL connection with the user and password before running the server

Pandora Server distribution tarball includes a Posix/System V start/stop script for "daemonize" Pandora
Server. It is possible that you need to customize, but its runs smoothly on GNU/Linux (debian, Suse) and
Solaris 8 systems. It has start|stop|restart parameters to include it in your default init level directory and it
creates a logﬁfile deﬁned in $log_ﬁfile variable (by default is /opt/pandora/pandora.log):
.I         /etc/init.d/pandora_server start

.B Setting up SSH conﬁguration

Pandora, uses SSH protocol to copy XML data packets, generated by the agents, to the server. You need to generate a SSH2 key in every agent, and copy the public key in
/home/pandora/.ssh/authorized_keys, so you need to create a user called "pandora" without
privileges. This user will be used by agents to copy data into Pandora Data Server
/opt/pandora/data_in directory.

Please BE SURE that user "pandora" exists (if not, create with useradd), and
/home/pandora/.ssh/authorized_keys exists and ownership of this ﬁle and directory is for
pandora user, and permissions set to 600.

Please be sure that directory /opt/pandora/data_in exists and pandora user is able to write in.

.SH AUTHOR

Pandora Free Monitoring System is made and copyrighted by Sancho Lerena <sancho.lerena@artica.es>
Pandora is a project initiated and mainly developed by Sancho Lerena, at present other people is working
on it: Raul Mateos, David Villanueva, Esteban Sanchez, Jose Navarro, Jonathan Barajas and Manuel Arostegui We want to
thank many other people who help us with translation, graphic design, bugs reporting and interesting
ideas.
.br


.SH SEE ALSO

.B pandora
.br
.B pandora_server
.br
.B pandora_agents
.br
.B pandora_console

